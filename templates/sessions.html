<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>GestiÃ³n de Sesiones YOLO</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body class="sessions-page">
    <div class="container">
        <div class="header">
            <a href="/" class="back-btn">â† Volver al inicio</a>
            <h1>ï¿½ GestiÃ³n de Sesiones</h1>
            <p>Administra tus proyectos de anotaciÃ³n</p>
        </div>
        
        <div id="sessionsList" class="sessions-panel">
            {% if sessions %}
                <div class="sessions-grid">
                    {% for session in sessions %}
                    <div class="session-card">
                        <h3>ğŸ“ {{ session.name }}</h3>
                        <div class="session-stats">
                            <span>ğŸ–¼ï¸ {{ session.images }} imÃ¡genes</span>
                            <span>ğŸ·ï¸ {{ session.labels }} labels</span>
                        </div>
                        <div class="session-actions">
                            <a href="/visualizer?session={{ session.name }}" class="btn-visualize">ğŸ‘ï¸ Visualizar</a>
                            <button onclick="openAugmentationModal('{{ session.name }}')" class="augment-btn">ğŸ”„ Augmentar</button>
                            <button onclick="deleteSession('{{ session.name }}')" class="btn-delete">ğŸ—‘ï¸ Eliminar</button>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            {% else %}
                <div class="no-sessions">
                    <h3>ğŸ“‚ No hay sesiones</h3>
                    <p>Para crear una sesiÃ³n, sube imÃ¡genes a:</p>
                    <code>annotations/nombre_sesion/images/</code>
                    <br><br>
                    <button onclick="createExampleSession()" class="btn-create">â• Crear SesiÃ³n de Ejemplo</button>
                </div>
            {% endif %}
        </div>
        
        <button onclick="refreshSessions()" class="save-btn" style="width: 100%; margin-top: 10px;">ğŸ”„ Actualizar</button>
    </div>

    <!-- Modal para AugmentaciÃ³n -->
    <div id="augmentationModal" class="augmentation-modal">
        <div class="augmentation-content">
            <h2 id="modalTitle">ğŸ”„ Augmentar Dataset</h2>
            <div id="sessionInfo" style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin-bottom: 20px;"></div>
            
            <h3>Selecciona las variantes a aplicar:</h3>
            <div id="variantGrid" class="variant-grid">
                <!-- Variantes se cargan dinÃ¡micamente -->
            </div>
            
            <div class="progress-container" id="progressContainer">
                <h4>Progreso de AugmentaciÃ³n:</h4>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text" id="progressText">0% - Preparando...</div>
            </div>
            
            <div class="modal-buttons">
                <button class="btn-secondary" onclick="closeAugmentationModal()">Cancelar</button>
                <button class="btn-primary" id="selectAllBtn" onclick="selectAllVariants()">Seleccionar Todo</button>
                <button class="btn-success" id="startAugmentationBtn" onclick="startAugmentation()">Iniciar AugmentaciÃ³n</button>
            </div>
        </div>
    </div>

    <script src="/static/sessions.js?v=2024"></script>
    <script>
        // Funciones adicionales especÃ­ficas para esta pÃ¡gina
        function createExampleSession() {
            alert('ğŸ’¡ Para crear una sesiÃ³n:\\n\\n' +
                  '1. Crea la carpeta: annotations/mi_sesion/\\n' +
                  '2. Crea subcarpeta: annotations/mi_sesion/images/\\n' +
                  '3. Sube tus imÃ¡genes JPG/PNG\\n' +
                  '4. Recarga esta pÃ¡gina');
        }
        
        // Recargar pÃ¡gina al hacer clic en actualizar
        function refreshSessions() {
            window.location.reload();
        }
    </script>
</body>
</html>
