<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Gestión de Sesiones YOLO</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body class="sessions-page">
    <div class="container">
        <div class="header">
            <a href="/" class="back-btn">← Volver al inicio</a>
            <h1>� Gestión de Sesiones</h1>
            <p>Administra tus proyectos de anotación</p>
        </div>
        
        <div id="sessionsList" class="sessions-panel">
            {% if sessions %}
                <div class="sessions-grid">
                    {% for session in sessions %}
                    <div class="session-card">
                        <h3>📁 {{ session.name }}</h3>
                        <div class="session-stats">
                            <span>🖼️ {{ session.images }} imágenes</span>
                            <span>🏷️ {{ session.labels }} labels</span>
                        </div>
                        <div class="session-actions">
                            <a href="/visualizer?session={{ session.name }}" class="btn-visualize">👁️ Visualizar</a>
                            <button onclick="openAugmentationModal('{{ session.name }}')" class="augment-btn">🔄 Augmentar</button>
                            <button onclick="deleteSession('{{ session.name }}')" class="btn-delete">🗑️ Eliminar</button>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            {% else %}
                <div class="no-sessions">
                    <h3>📂 No hay sesiones</h3>
                    <p>Para crear una sesión, sube imágenes a:</p>
                    <code>annotations/nombre_sesion/images/</code>
                    <br><br>
                    <button onclick="createExampleSession()" class="btn-create">➕ Crear Sesión de Ejemplo</button>
                </div>
            {% endif %}
        </div>
        
        <button onclick="refreshSessions()" class="save-btn" style="width: 100%; margin-top: 10px;">🔄 Actualizar</button>
    </div>

    <!-- Modal para Augmentación -->
    <div id="augmentationModal" class="augmentation-modal">
        <div class="augmentation-content">
            <h2 id="modalTitle">🔄 Augmentar Dataset</h2>
            <div id="sessionInfo" style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin-bottom: 20px;"></div>
            
            <h3>Selecciona las variantes a aplicar:</h3>
            <div id="variantGrid" class="variant-grid">
                <!-- Variantes se cargan dinámicamente -->
            </div>
            
            <div class="progress-container" id="progressContainer">
                <h4>Progreso de Augmentación:</h4>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text" id="progressText">0% - Preparando...</div>
            </div>
            
            <div class="modal-buttons">
                <button class="btn-secondary" onclick="closeAugmentationModal()">Cancelar</button>
                <button class="btn-primary" id="selectAllBtn" onclick="selectAllVariants()">Seleccionar Todo</button>
                <button class="btn-success" id="startAugmentationBtn" onclick="startAugmentation()">Iniciar Augmentación</button>
            </div>
        </div>
    </div>

    <script src="/static/sessions.js?v=2024"></script>
    <script>
        // Funciones adicionales específicas para esta página
        function createExampleSession() {
            alert('💡 Para crear una sesión:\\n\\n' +
                  '1. Crea la carpeta: annotations/mi_sesion/\\n' +
                  '2. Crea subcarpeta: annotations/mi_sesion/images/\\n' +
                  '3. Sube tus imágenes JPG/PNG\\n' +
                  '4. Recarga esta página');
        }
        
        // Recargar página al hacer clic en actualizar
        function refreshSessions() {
            window.location.reload();
        }
    </script>
</body>
</html>
